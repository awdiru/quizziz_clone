# API Documentation: Quizziz Clone Project
> Базовый URL: /api
> 
> Формат данных: JSON
> 
> Авторизация: Bearer Token (JWT) в заголовке Authorization
> 
> ***Ссылка на Swagger документацию:*** http://localhost:8080/swagger-ui/index.html#/

## 1. Аутентификация и регистрация 
***Эндпоинты для управления доступом учителей.***
**Регистрация нового учителя**
> * **URL:** `/register`
> * **Метод:** `POST`
> * **Тело запроса:**
>   ```json
>   {
>     "email": "teacher@example.com",
>     "password": "securePassword123"
>   }
>   ```
> * **Описание:** Активирует аккаунт учителя. Обычно вызывается по ссылке из письма.

**Подтверждение регистрации (для админа)**
> * **URL:** `/confirm`
> * **Метод:** `GET`
> * **Параметры:** `token` (String)
> * **Описание:** Создает аккаунт в состоянии enabled: false и отправляет письмо администратору.

**Вход в систему**
> * **URL:** `/login`
> * **Метод:** `POST`
> * **Тело запроса:**
>   ```json
>   {
>     "email": "teacher@example.com",
>     "password": "securePassword123"
>   }
>   ```
> * **Успешный ответ (200 OK):** 
>   ```json
>   {
>     "token": "eyJhbGciOiJIUzI1Ni...",
>     "type": "Bearer"
>   }
>   ```

## 2. Файловая система (/fs)
***Управление структурой папок и тестов. Все методы требуют авторизации.***

**Получение списка доступных директорий**
> * **URL:** `/list`
> * **Метод:** `GET`
> * **Параметры:** `parentId` (Long, optional) — если не указан, возвращает корень.
> * **Описание:** Возвращает список DTO (папки и тесты), к которым у пользователя есть доступ (свои + расшаренные).

**Создание папки**
> * **URL:** `/directory`
> * **Метод:** `POST`
> * **Параметры:** `name` (String), `parentId` (Long, optional)
> * **Успешный ответ (200 OK):**
> ```json
>  {
>    "id": 3,
>    "name": "Folder name",
>    "parentId": null,
>    "type": "DIRECTORY",
>    "ownerEmail": "test@example.com",
>    "created": "2025-12-23T21:40:48.5786625",
>    "canEdit": true
>  }
> ```

**Создание теста (как элемента ФС)**
> * **URL:** `/test`
> * **Метод:** `POST`
> * **Параметры:** `name` (String), `parentId` (Long, optional)
> * **Описание:** Создает "пустой" тест в файловой структуре.

**Переименование**
> * **URL:** `/{id}/rename`
> * **Метод:** `PATCH`
> * **Параметры:** `newName` (String)
> * **Описание:** Переименовывает элемент по его id.

**Удаление**
> * **URL:** `/{id}`
> * **Метод:** `DELETE`
> * **Описание:** Удаляет элемент. Если это папка — удаляет всё содержимое (каскадно).

**Предоставление доступа (Share)**
> * **URL:** `/{id}/share`
> * **Метод:** `POST`
> * **Параметры:** `guestEmail` (String) `canEdit` (boolean, default: false)
> * **Описание:** Дает доступ другому учителю к этому элементу.

## 3. Управление тестами (/tests)
***Работа с внутренним контентом тестов (вопросы и ответы).***

**Обновление контента теста**
> * **URL:** `/{id}/content`
> * **Метод:** `PUT`
> * **Тело запроса:**
> ```json
> {
>   "questions": [
>     {
>       "questionText": "Чему равно 2+2?",
>       "answers": [
>         {
>           "answerText": "4",
>           "number": 1,
>           "isRight": true
>         },
>         {
>           "answerText": "5",
>           "number": 2,
>           "isRight": false
>         }
>       ]
>     }
>   ]
> }
>  ```
> * **Описание:** Полностью перезаписывает вопросы теста. Старые вопросы удаляются автоматически.

**Получение контента теста**
> * **URL:** `/{id}/content`
> * **Метод:** `GET`
> * **Описание:** Возвращает структуру вопросов и ответов для редактирования или просмотра.

## 4. Коды ответов и ошибки
***Проект использует глобальный обработчик исключений. Типовой формат ошибки:***
```json
{
  "status": 404,
  "message": "Элемент не найден",
  "timestamp": "2023-10-27T10:00:00"
}
```
| **Код**            | **Описание**l                                                     |
|:-------------------|:------------------------------------------------------------------|
| 200 OK             | Запрос выполнен успешно.                                          |
| 401 Unauthorized   | JWT токен отсутствует или невалиден.                              |
| 403 Forbidden      | У вас нет прав на это действие (например, удаление чужого файла). |
| 404 Not Found      | Ресурс (файл, папка, тест) не найден.                             |
| 500 Internal Error | Ошибка на стороне сервера                                         |



